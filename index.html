<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8>
  <title>My first three.js app</title>
  <style>
    body { margin: 0; }
    canvas { width: 100%; height: 100% }
  </style>
</head>
<body>

<img class="swatch" src="./swatch/carpet-acton-thames-floor-godfrey_hirst.jpg" />
<img class="swatch" src="./swatch/carpet-wool_creations_ii-black-floor-godfrey_hirst.jpg" />
<img class="swatch" src="./swatch/carpet-callie-cobalt-floor-godfrey_hirst.jpg" />
<img class="swatch" src="./swatch/carpet-merino_splendour-colonial_white-floor-godfrey_hirst.jpg" />

<script src="https://threejs.org/build/three.js"></script>

<script>

  var updateMaterial = null;

  var scene = new THREE.Scene();
  var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );

  var renderer = new THREE.WebGLRenderer();
  renderer.setSize( window.innerWidth, window.innerHeight );
  document.body.appendChild( renderer.domElement );

  var geometry = new THREE.PlaneGeometry( 5, 5, 5 );

  var loader = new THREE.TextureLoader();

  var texture = loader.load("./swatch/carpet-acton-thames-floor-godfrey_hirst.jpg");

  texture.wrapS = THREE.RepeatWrapping;
  texture.wrapT = THREE.RepeatWrapping;
  texture.repeat.set( 4, 4 );

  var material = new THREE.MeshBasicMaterial( { map: texture } );


  var plane = new THREE.Mesh( geometry, material );

  plane.rotateX(-1);

  scene.add( plane );

  camera.position.z = 7;



  var animate = function () {
    requestAnimationFrame( animate );

    //plane.rotation.x += 0.1;
    //plane.rotation.y += 0.1;
    plane.rotation.z += 0.005;

    if (updateMaterial) {

      texture = loader.load(updateMaterial);

      texture.wrapS = THREE.RepeatWrapping;
      texture.wrapT = THREE.RepeatWrapping;
      texture.repeat.set( 4, 4 );

      material = new THREE.MeshBasicMaterial( { map: texture } );


      plane = new THREE.Mesh( geometry, material );

      plane.rotateX(-1);

      scene = new THREE.Scene();

      scene.add( plane );

      updateMaterial = null;
    }

    renderer.render(scene, camera);
  };


  animate();



  var classname = document.getElementsByClassName("swatch");

  var swatchClicked = function() {
    console.log(this.src);
    updateMaterial = this.src;
  };

  for (var i = 0; i < classname.length; i++) {
    classname[i].addEventListener('click', swatchClicked, false);
  }


</script>

</body>
</html>